---
title: 并发学习
date: 2021-06-09 22:29:23
tags: 
	- 并发
categories:
	- 并发
---

# CPU线程调度

## 算法概念

假设计算机只有一个 CPU ，则在任意时刻只能执行一条机器指令，每个线程只有获得 CPU 的使用权才能执行指令。 

- 所谓多线程的并发运行，其实是指从宏观上看，各个线程轮流获得 CPU 的使用权，分别执行各自的任务。 
- 在运行池中，会有多个处于就绪状态的线程在等待 CPU ，Java 虚拟机的一项任务就是负责线程的调度，线程调度是指按照特定机制为多个线程分配 CPU 的使用权。 



有两种调度模型：**分时调度模型**和**抢占式调度模型**。 

- 分时调度模型是指让所有的线程轮流获得 CPU 的使用权,并且平均分配每个线程占用的 CPU 的时间片这个也比 

较好理解。 

- Java 虚拟机采用抢占式调度模型，是指优先让可运行池中优先级高的线程占用 CPU ，如果可运行池中的线程优先级相同，那么就随机选择一个线程，使其占用 CPU 。处于运行状态的线程会一直运行，直至它不得不放弃 

CPU 。



## 线程饥饿概念

饥饿，一个或者多个线程因为种种原因无法获得所需要的资源，导致一直无法执行的状态。 

Java 中导致饥饿的原因： 

- 高优先级线程吞噬所有的低优先级线程的 CPU 时间。 
- 线程被永久堵塞在一个等待进入同步块的状态，因为其他线程总是能在它之前持续地对该同步块进行访 

问。 

- 线程在等待一个本身也处于永久等待完成的对象(比如调用这个对象的 wait 方法)，因为其他线程总是被持 

续地获得唤醒。



## 线程优化级概念

每一个线程都是有优先级的，一般来说，高优先级的线程在运行时会具有优先权，但这依赖于线程调度的实 

现，这个实现是和操作系统相关的(OS dependent)。 

- 我们可以定义线程的优先级，但是这并不能保证高优先级的线程会在低优先级的线程前执行。线程优先级 

是一个 int 变量(从1-10)，1 代表最低优先级，10 代表最高优先级。 

- Java 的线程优先级调度会委托给操作系统去处理，所以与具体的操作系统优先级有关，如非特别需要，一 

般无需设置线程优先级。



## 进程

### 概念



## 线程

### 概念



### 生命周期



# JMM模型

## 概念图

## 三大特性



# volatile内存语义



# CPU缓存一致性协议
